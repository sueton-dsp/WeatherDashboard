<!DOCTYPE html>
<html lang="de" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fertigungs-Dashboard</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>&#9881;</text></svg>">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body>
    <header class="header">
        <div class="header__left">
            <h1 class="header__title">
                <span class="header__logo">&#9881;</span>
                Fertigungs-Dashboard
            </h1>
        </div>
        <div class="header__actions">
            <label class="file-btn" id="btn-open">
                <input type="file" accept=".csv" hidden id="file-open">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
                Offene AG
            </label>
            <label class="file-btn" id="btn-done">
                <input type="file" accept=".csv" hidden id="file-done">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                Beendete AG
            </label>
            <span class="header__divider"></span>
            <button class="icon-btn" id="theme-toggle" title="Dark/Light Mode">
                <svg class="icon--dark" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
                <svg class="icon--light" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
            </button>
        </div>
    </header>

    <main class="dashboard">
        <!-- Hinweis: Demodaten -->
        <div class="info-bar" id="info-bar">
            Beispieldaten geladen. Eigene CSV-Dateien oben hochladen, um deine Daten anzuzeigen.
        </div>

        <!-- KPI-Karten -->
        <section class="kpi-row" id="kpi-row">
            <div class="kpi-card">
                <div class="kpi-card__icon kpi-card__icon--blue">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 3h-8l-2 4h12z"/></svg>
                </div>
                <div class="kpi-card__content">
                    <span class="kpi-card__value" id="kpi-total-orders">--</span>
                    <span class="kpi-card__label">Fertigungsauftraege</span>
                </div>
            </div>
            <div class="kpi-card">
                <div class="kpi-card__icon kpi-card__icon--orange">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                </div>
                <div class="kpi-card__content">
                    <span class="kpi-card__value" id="kpi-open-ops">--</span>
                    <span class="kpi-card__label">Offene Arbeitsgaenge</span>
                </div>
            </div>
            <div class="kpi-card">
                <div class="kpi-card__icon kpi-card__icon--green">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                </div>
                <div class="kpi-card__content">
                    <span class="kpi-card__value" id="kpi-done-ops">--</span>
                    <span class="kpi-card__label">Beendete Arbeitsgaenge</span>
                </div>
            </div>
            <div class="kpi-card">
                <div class="kpi-card__icon kpi-card__icon--red">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                </div>
                <div class="kpi-card__content">
                    <span class="kpi-card__value" id="kpi-scrap-rate">--</span>
                    <span class="kpi-card__label">Ausschussquote</span>
                </div>
            </div>
            <div class="kpi-card">
                <div class="kpi-card__icon kpi-card__icon--purple">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>
                </div>
                <div class="kpi-card__content">
                    <span class="kpi-card__value" id="kpi-completion-rate">--</span>
                    <span class="kpi-card__label">Mengenerfuellung</span>
                </div>
            </div>
        </section>

        <!-- Charts -->
        <section class="charts-row">
            <div class="card">
                <div class="card__header"><h3>Status-Verteilung (Offene AG)</h3></div>
                <div class="card__body card__body--chart">
                    <canvas id="chart-status"></canvas>
                </div>
            </div>
            <div class="card">
                <div class="card__header"><h3>Arbeitsgaenge pro Arbeitsplatz</h3></div>
                <div class="card__body card__body--chart">
                    <canvas id="chart-workcenters"></canvas>
                </div>
            </div>
        </section>

        <section class="charts-row">
            <div class="card">
                <div class="card__header"><h3>Beendete AG im Zeitverlauf</h3></div>
                <div class="card__body card__body--chart">
                    <canvas id="chart-timeline"></canvas>
                </div>
            </div>
            <div class="card">
                <div class="card__header"><h3>Soll vs. Ist Menge (Beendet)</h3></div>
                <div class="card__body card__body--chart">
                    <canvas id="chart-quantities"></canvas>
                </div>
            </div>
        </section>

        <!-- Tabellen -->
        <section class="tables-row">
            <div class="card card--table">
                <div class="card__header">
                    <h3>Offene Arbeitsgaenge</h3>
                    <input type="text" class="table-search" id="search-open" placeholder="Suchen...">
                </div>
                <div class="card__body card__body--table">
                    <table class="data-table" id="table-open">
                        <thead>
                            <tr>
                                <th>Auftrag</th>
                                <th>Material</th>
                                <th>Bezeichnung</th>
                                <th>AG</th>
                                <th>Arbeitsplatz</th>
                                <th>Planstart</th>
                                <th>Planende</th>
                                <th>Soll</th>
                                <th>Rueckm.</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="tbody-open"></tbody>
                    </table>
                </div>
            </div>
        </section>

        <section class="tables-row">
            <div class="card card--table">
                <div class="card__header">
                    <h3>Beendete Arbeitsgaenge</h3>
                    <input type="text" class="table-search" id="search-done" placeholder="Suchen...">
                </div>
                <div class="card__body card__body--table">
                    <table class="data-table" id="table-done">
                        <thead>
                            <tr>
                                <th>Auftrag</th>
                                <th>Material</th>
                                <th>Bezeichnung</th>
                                <th>AG</th>
                                <th>Arbeitsplatz</th>
                                <th>Iststart</th>
                                <th>Istende</th>
                                <th>Soll</th>
                                <th>Ist</th>
                                <th>Aussch.</th>
                            </tr>
                        </thead>
                        <tbody id="tbody-done"></tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <script src="js/app.js"></script>
</body>
</html>
